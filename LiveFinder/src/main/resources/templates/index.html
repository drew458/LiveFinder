<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="base.html :: head(titolo=#{index.title})">
</head>
<body>
	<!-- START Navbar -->
	<nav th:replace="base.html :: navbar"></nav>
	<!-- END Navbar -->
  
	<div class="container text-center mt-4">
	
	
		<!-- ANONYMOUS -->
		<div sec:authorize="isAnonymous()">
			<p class="h1" th:text="#{index.anonymousWelcome}">Benvenuto in</p>
			<p class="logo-big-style" th:text="'LiveFinder '+#{index.anonymousWelcomeLogo}">LiveFinder</p>
			
			<div>
				<a th:href="@{/login}" th:text="#{index.login}">Accedi</a>
			</div>
			
			<div>
				<a th:href="@{/register}" th:text="#{index.register}">Registrati</a>
			</div>
		</div>
		<!-- END ANONYMOUS -->
	
		<!-- AUTHENTICATED -->
		<div sec:authorize="hasAuthority('DEFAULT')">
			<p class="logo-big-style" th:text="'LiveFinder '+#{index.anonymousWelcomeLogo}">LiveFinder</p>
			<h1 th:text="#{index.welcome}">Benvenuto</h1>
			<!-- Login via Google OAuth2 -->
	        <h3 th:if="${#authentication.getPrincipal().getClass() == 
					T(org.springframework.security.oauth2.core.oidc.user.DefaultOidcUser)}"
				th:text="${#authentication.getPrincipal().getAttributes().given_name}">
	    	</h3>
	
	    	<!-- Login via Github OAuth2 -->
	    	<h3 th:if="${#authentication.getPrincipal().getClass() == 
	    			T(org.springframework.security.oauth2.core.user.DefaultOAuth2User)}"
	    		th:text="${#authentication.getPrincipal().getAttributes().login}">
	    	</h3>			
			
			<!-- Login via email and password -->
	    	<h3 th:if="${#authentication.getPrincipal().getClass() == 
	    			T(org.springframework.security.core.userdetails.User)}"
				th:text="${#authentication.getPrincipal().getUsername()}">
	    	</h3>
			
			<div>
				<a th:href="@{/users/artisti}">Tutti gli artisti</a>
			</div>
			
			<div>
				<a th:href="@{/users/listaTour}">Tutti i tour</a>
			</div>	
		</div>
		<!-- END AUTHENTICATED -->
		
		<!-- ADMIN -->
		<div sec:authorize="hasAuthority('ADMIN')">
			<p class="logo-big-style" th:text="'LiveFinder '+#{index.anonymousWelcomeLogo}">LiveFinder</p>
			<div class="row">
				<div class="col-lg mb-4">
					<h1 th:text="#{index.welcome}">Benvenuto</h1>
					<!-- Login via Google OAuth2 -->
			        <h3 th:if="${#authentication.getPrincipal().getClass() == 
							T(org.springframework.security.oauth2.core.oidc.user.DefaultOidcUser)}"
						th:text="${#authentication.getPrincipal().getAttributes().given_name}">
			    	</h3>
			
			    	<!-- Login via Github OAuth2 -->
			    	<h3 th:if="${#authentication.getPrincipal().getClass() == 
			    			T(org.springframework.security.oauth2.core.user.DefaultOAuth2User)}"
			    		th:text="${#authentication.getPrincipal().getAttributes().login}">
			    	</h3>			
					
					<!-- Login via email and password -->
			    	<h3 th:if="${#authentication.getPrincipal().getClass() == 
			    			T(org.springframework.security.core.userdetails.User)}"
						th:text="${#authentication.getPrincipal().getUsername()}">
			    	</h3>
					
					<div class="mt-3">
						<a th:href="@{/users/artisti}">Tutti gli artisti</a>
					</div>
					
					<div class="mt-1">
						<a th:href="@{/users/listaTour}">Tutti i tour</a>
					</div>						
				</div>
				
				<div class="col-lg mb-4 mt-4">
					<h1 th:text="#{index.adminOperations}">Operazioni per Admin</h1>
					
					<div class="mt-2">
						<a th:href="@{/admin/artistaForm}">Aggiungi artista</a>
					</div>
					
					<div class="mt-1">
						<a th:href="@{/admin/tourForm}">Aggiungi un tour</a>
		      		</div>
		      
					<div class="mt-1">
						<a th:href="@{/admin/concertoForm}">Aggiungi un concerto</a>
		      		</div>
					
					<div class="mt-1">
						<a th:href="@{/admin/luogoForm}">Aggiungi un luogo</a>
					</div>
				</div>
			</div>			
		</div>
		<!-- END ADMIN -->		
      
	    <!--  <div class="container mt-5">
	        <h4>Ricerca dei concerti per citta</h4>
	
	        <form th:action="@{/search}" method="get">
	          <input type="search" name="parolaChiave" th:value="${parolaChiave}" placeholder="Inserisci una citta" size="50" >
	          <button type="submit" class="btn btn-info" >Cerca</button>
	        </form>
	
	        <table class="tabellaConcertiPerCitta">
	          <thead>
	            <tr>
	              <th>Artista</th>
	              <th>Citta</th>
	              <th>Data</th>
	            </tr>
	          </thead>
	          <tbody>
	            <tr th:each="c : ${concerti}" th:field="${c}">
	              <td th:text="${cStat.index+1}"></td>
	              <td th:text="${c.nome}"></td>
	              <td th:text="${c.citta}"></td>
	              <td th:text="${c.data}"></td>
	            </tr>
	          </tbody>
	        </table>
	      </div> -->
	    </div>
	</div>
		
	</body>
</html>